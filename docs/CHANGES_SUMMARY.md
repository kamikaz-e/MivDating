# –†–µ–∑—é–º–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è LLM –¥–ª—è Jetpack Compose

## –û–±–∑–æ—Ä

–î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É –¥–≤—É–º—è —Ä–µ–∂–∏–º–∞–º–∏ —Ä–∞–±–æ—Ç—ã LLM:
1. **–†–µ–∂–∏–º Jetpack Compose** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞
2. **–û–±—ã—á–Ω—ã–π —Ä–µ–∂–∏–º** - –¥–ª—è –æ–±—â–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –∑–∞–¥–∞—á

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å—Ä–∞–≤–Ω–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤ —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π –∏ –±–µ–∑ –Ω–µ—ë.

## –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 1. `OllamaChatRequest.kt` (OllamaChatOptions.kt:20-28)
**–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:**
–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è —Ç–æ–Ω–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ LLM:
- `num_ctx` - —Ä–∞–∑–º–µ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –æ–∫–Ω–∞
- `top_p` - nucleus sampling
- `top_k` - top-k sampling
- `repeat_penalty` - —à—Ç—Ä–∞—Ñ –∑–∞ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è

### 2. `OllamaClient.kt`
**–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:**

#### –£–¥–∞–ª–µ–Ω–æ:
- ‚ùå –ú–µ—Ç–æ–¥ `chatWithContext()` - –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –Ω–∏–≥–¥–µ –≤ –∫–æ–¥–µ

#### –î–æ–±–∞–≤–ª–µ–Ω–æ:
- ‚úÖ –ú–µ—Ç–æ–¥ `generateJetpackComposeCode()` (OllamaClient.kt:405-477)
  - –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞ Jetpack Compose
  - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∫–æ–¥–∞
  - –î–µ—Ç–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ best practices

#### –û–±–Ω–æ–≤–ª–µ–Ω–æ:
- üîÑ –ú–µ—Ç–æ–¥ `chat()` (OllamaClient.kt:356-373, 414-426)
  - –î–æ–±–∞–≤–ª–µ–Ω —É–ª—É—á—à–µ–Ω–Ω—ã–π —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è Android —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
  - –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–¥–µ–ª–∏ –¥–ª—è –ª—É—á—à–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ –æ—Ç–≤–µ—Ç–æ–≤

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ —Ä–µ–∂–∏–º–µ `chat()` (–û–±—ã—á–Ω—ã–π —Ä–µ–∂–∏–º):**
```kotlin
temperature = 0.3
num_ctx = 8192
num_predict = 2048
top_p = 0.9
top_k = 40
repeat_penalty = 1.1
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ —Ä–µ–∂–∏–º–µ `generateJetpackComposeCode()` (–†–µ–∂–∏–º Jetpack Compose):**
```kotlin
temperature = 0.15      // –ù–∏–∂–µ –¥–ª—è –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏
num_ctx = 16384         // –ë–æ–ª—å—à–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
num_predict = 4096      // –ë–æ–ª—å—à–µ —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –∫–æ–¥–∞
top_p = 0.85           // –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–µ–µ
top_k = 30             // –ú–µ–Ω—å—à–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
repeat_penalty = 1.15  // –°–∏–ª—å–Ω–µ–µ —à—Ç—Ä–∞—Ñ
```

### 3. `OllamaViewModel.kt` (RAGViewModel.kt)

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:**

#### –î–æ–±–∞–≤–ª–µ–Ω–æ –≤ RAGUiState:
- ‚úÖ `useOptimizedComposeMode: Boolean = true` (OllamaViewModel.kt:64)
  - –§–ª–∞–≥ –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É —Ä–µ–∂–∏–º–∞–º–∏

#### –£–¥–∞–ª–µ–Ω–æ:
- ‚ùå –ú–µ—Ç–æ–¥ `sendComposeCodeRequest()` - –¥—É–±–ª–∏—Ä–æ–≤–∞–ª —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

#### –û–±–Ω–æ–≤–ª–µ–Ω–æ:
- üîÑ –ú–µ—Ç–æ–¥ `sendChatMessage()` (OllamaViewModel.kt:412-458)
  - –¢–µ–ø–µ—Ä—å –≤—ã–±–∏—Ä–∞–µ—Ç –º–µ–∂–¥—É `chat()` –∏ `generateJetpackComposeCode()` –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç `useOptimizedComposeMode`
  - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —Ä–µ–∂–∏–º–∞

#### –î–æ–±–∞–≤–ª–µ–Ω–æ:
- ‚úÖ –ú–µ—Ç–æ–¥ `toggleOptimizedComposeMode()` (OllamaViewModel.kt:527-530)
  - –ü–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç —Ä–µ–∂–∏–º –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 4. `ChatScreen.kt`

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:**

#### –î–æ–±–∞–≤–ª–µ–Ω–æ:
- ‚úÖ Import `Switch` (ChatScreen.kt:35)
- ‚úÖ UI —ç–ª–µ–º–µ–Ω—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è —Ä–µ–∂–∏–º–∞ (ChatScreen.kt:295-333)
  - –ö–∞—Ä—Ç–æ—á–∫–∞ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º —Ç–µ–∫—É—â–µ–≥–æ —Ä–µ–∂–∏–º–∞
  - Switch –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è
  - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä: ‚ö° –¥–ª—è Jetpack Compose —Ä–µ–∂–∏–º–∞, üí¨ –¥–ª—è –æ–±—ã—á–Ω–æ–≥–æ

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:

1. –û—Ç–∫—Ä–æ–π—Ç–µ —ç–∫—Ä–∞–Ω —á–∞—Ç–∞
2. –ù–∞–¥ –ø–æ–ª–µ–º –≤–≤–æ–¥–∞ —É–≤–∏–¥–∏—Ç–µ –∫–∞—Ä—Ç–æ—á–∫—É —Å –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ–º
3. –í–∫–ª—é—á–∏—Ç–µ/–≤—ã–∫–ª—é—á–∏—Ç–µ "–†–µ–∂–∏–º Jetpack Compose"
4. –ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å –∏ —Å—Ä–∞–≤–Ω–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

**–†–µ–∂–∏–º Jetpack Compose (–≤–∫–ª—é—á–µ–Ω):**
- "–°–æ–∑–¥–∞–π –∫–Ω–æ–ø–∫—É —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–º —Ñ–æ–Ω–æ–º"
- "–ù–∞–ø–∏—à–∏ LazyColumn —Å–æ —Å–ø–∏—Å–∫–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π"
- "–†–µ–∞–ª–∏–∑—É–π –ø—Ä–æ—Å—Ç—É—é —Ñ–æ—Ä–º—É –ª–æ–≥–∏–Ω–∞"

**–û–±—ã—á–Ω—ã–π —Ä–µ–∂–∏–º (–≤—ã–∫–ª—é—á–µ–Ω):**
- "–û–±—ä—è—Å–Ω–∏ —á—Ç–æ —Ç–∞–∫–æ–µ remember –≤ Compose"
- "–ö–∞–∫–∏–µ best practices –¥–ª—è Android?"
- "–†–∞—Å—Å–∫–∞–∂–∏ –æ –∂–∏–∑–Ω–µ–Ω–Ω–æ–º —Ü–∏–∫–ª–µ Activity"

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

### –†–µ–∂–∏–º Jetpack Compose:
‚úÖ –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞
‚úÖ –ë–æ–ª–µ–µ —Ç–æ—á–Ω—ã–π –∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–æ–¥
‚úÖ –°–ª–µ–¥–æ–≤–∞–Ω–∏–µ best practices –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
‚úÖ –ë–æ–ª—å—à–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
‚úÖ –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (–º–µ–Ω—å—à–µ –≤–∞—Ä–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏)

### –û–±—ã—á–Ω—ã–π —Ä–µ–∂–∏–º:
‚úÖ –ë–æ–ª–µ–µ –∫—Ä–µ–∞—Ç–∏–≤–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
‚úÖ –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –æ–±—ä—è—Å–Ω–µ–Ω–∏–π –∏ –æ–±—Å—É–∂–¥–µ–Ω–∏–π
‚úÖ –ë—ã—Å—Ç—Ä–µ–µ (–º–µ–Ω—å—à–µ —Ç–æ–∫–µ–Ω–æ–≤)
‚úÖ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü—Ä–æ–º–ø—Ç –≤ —Ä–µ–∂–∏–º–µ Jetpack Compose:

```
–¢—ã ‚Äî —ç–∫—Å–ø–µ—Ä—Ç –ø–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ Android –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –Ω–∞ Kotlin –∏ Jetpack Compose.

–í–ê–ñ–ù–´–ï –ü–†–ê–í–ò–õ–ê:
1. –ò—Å–ø–æ–ª—å–∑—É–π —Ç–æ–ª—å–∫–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ API Jetpack Compose (Material3)
2. –°–ª–µ–¥—É–π –ø—Ä–∏–Ω—Ü–∏–ø–∞–º Compose: –æ–¥–Ω–æ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö, –ø–æ–¥–Ω—è—Ç–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
3. –ü—Ä–∏–º–µ–Ω—è–π best practices: recomposition, remember, derivedStateOf
4. –ö–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–º
5. –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏
6. –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ @Composable —Ñ—É–Ω–∫—Ü–∏–π
7. Preview —Å @Preview
8. Modifier DSL
9. LaunchedEffect, rememberCoroutineScope –¥–ª—è side effects
10. Navigation Compose

–°–¢–†–£–ö–¢–£–†–ê –û–¢–í–ï–¢–ê:
- –ö—Ä–∞—Ç–∫–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ (1-2 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è)
- –ü–æ–ª–Ω—ã–π, –≥–æ—Ç–æ–≤—ã–π –∫–æ–¥
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

–û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø:
- –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è recomposition
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ remember
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã
```

### –ü—Ä–æ–º–ø—Ç –≤ –æ–±—ã—á–Ω–æ–º —Ä–µ–∂–∏–º–µ:

```
–¢—ã ‚Äî AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç, —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—â–∏–π—Å—è –Ω–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ Android –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Kotlin –∏ Jetpack Compose.

–¢–≤–æ—è –∑–∞–¥–∞—á–∞:
- –ü–æ–º–æ–≥–∞—Ç—å —Å –Ω–∞–ø–∏—Å–∞–Ω–∏–µ–º –∫–æ–¥–∞ –Ω–∞ Jetpack Compose
- –û—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –ø–æ Android —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- –û–±—ä—è—Å–Ω—è—Ç—å –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ —á–µ—Ç–∫–æ –∏ –ø–æ–Ω—è—Ç–Ω–æ
```

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `docs/LLM_OPTIMIZATION.md` —Å –ø–æ–ª–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º:
- –í—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- –ü—Ä–∏–º–µ—Ä–æ–≤ –ø—Ä–æ–º–ø—Ç–æ–≤
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## –ü—Ä–æ–≤–µ—Ä–∫–∞

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.
